{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/Desktop/App/react-rmdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Documents/Desktop/App/react-rmdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Documents/Desktop/App/react-rmdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import API from'../API';//Components\nimport Button from'./Button';//Styles\nimport{Wrapper}from'./Login.styles';//Context\nimport{Context}from'../context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useContext=useContext(Context),_useContext2=_slicedToArray(_useContext,2),_user=_useContext2[0],setUser=_useContext2[1];var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestToken,sessionId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(false);_context.prev=1;_context.next=4;return API.getRequestToken();case 4:requestToken=_context.sent;_context.next=7;return API.authenticate(requestToken,username,password);case 7:sessionId=_context.sent;console.log(sessionId);setUser({sessionId:sessionId.session_id,username:username});navigate('/');_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);setError(true);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleInput=function handleInput(e){var name=e.currentTarget.name;var value=e.currentTarget.value;if(name==='username')setUsername(value);if(name==='password')setPassword(value);};return/*#__PURE__*/_jsxs(Wrapper,{children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"There was an error!\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,name:\"username\",onChange:handleInput}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,name:\"password\",onChange:handleInput}),/*#__PURE__*/_jsx(Button,{text:\"Login\",callback:handleSubmit})]});};export default Login;","map":{"version":3,"sources":["D:/Documents/Desktop/App/react-rmdb/src/components/Login.js"],"names":["React","useState","useContext","useNavigate","API","Button","Wrapper","Context","Login","username","setUsername","password","setPassword","error","setError","_user","setUser","navigate","handleSubmit","getRequestToken","requestToken","authenticate","sessionId","console","log","session_id","handleInput","e","name","currentTarget","value"],"mappings":"2cAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA;AACA,OAASC,OAAT,KAAwB,gBAAxB,CACA;AACA,OAAQC,OAAR,KAAsB,YAAtB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAChB,cAA8BP,QAAQ,CAAC,EAAD,CAAtC,wCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA8BT,QAAQ,CAAC,EAAD,CAAtC,yCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAAwBX,QAAQ,CAAC,KAAD,CAAhC,yCAAOY,KAAP,eAAcC,QAAd,eAEA,gBAAyBZ,UAAU,CAACK,OAAD,CAAnC,4CAAOQ,KAAP,iBAAcC,OAAd,iBACA,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CAEA,GAAMe,CAAAA,YAAY,0FAAG,8JACjBJ,QAAQ,CAAC,KAAD,CAAR,CADiB,sCAGcV,CAAAA,GAAG,CAACe,eAAJ,EAHd,QAGPC,YAHO,qCAIWhB,CAAAA,GAAG,CAACiB,YAAJ,CACpBD,YADoB,CAEpBX,QAFoB,CAGpBE,QAHoB,CAJX,QAIPW,SAJO,eASbC,OAAO,CAACC,GAAR,CAAYF,SAAZ,EACAN,OAAO,CAAC,CAAEM,SAAS,CAAEA,SAAS,CAACG,UAAvB,CAAmChB,QAAQ,CAARA,QAAnC,CAAD,CAAP,CAEAQ,QAAQ,CAAC,GAAD,CAAR,CAZa,iFAcbH,QAAQ,CAAC,IAAD,CAAR,CAda,qEAAH,kBAAZI,CAAAA,YAAY,0CAAlB,CAkBA,GAAMQ,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,CAAC,CAAI,CACrB,GAAMC,CAAAA,IAAI,CAAGD,CAAC,CAACE,aAAF,CAAgBD,IAA7B,CACA,GAAME,CAAAA,KAAK,CAAGH,CAAC,CAACE,aAAF,CAAgBC,KAA9B,CAEA,GAAGF,IAAI,GAAK,UAAZ,CAAwBlB,WAAW,CAACoB,KAAD,CAAX,CACxB,GAAGF,IAAI,GAAK,UAAZ,CAAwBhB,WAAW,CAACkB,KAAD,CAAX,CAC3B,CAND,CAQA,mBACI,MAAC,OAAD,YACKjB,KAAK,eAAI,YAAK,SAAS,CAAC,OAAf,iCADd,cAEI,oCAFJ,cAGI,cACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAEJ,QAFX,CAGI,IAAI,CAAC,UAHT,CAII,QAAQ,CAAEiB,WAJd,EAHJ,cASI,cACI,IAAI,CAAC,UADT,CAEI,KAAK,CAAEf,QAFX,CAGI,IAAI,CAAC,UAHT,CAII,QAAQ,CAAEe,WAJd,EATJ,cAeI,KAAC,MAAD,EAAQ,IAAI,CAAC,OAAb,CAAqB,QAAQ,CAAER,YAA/B,EAfJ,GADJ,CAmBH,CArDD,CAuDA,cAAeV,CAAAA,KAAf","sourcesContent":["import React, {useState, useContext} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport API from '../API';\r\n//Components\r\nimport Button from './Button';\r\n//Styles\r\nimport { Wrapper } from './Login.styles';\r\n//Context\r\nimport {Context} from '../context';\r\n\r\nconst Login = () => {\r\n    const [username, setUsername]=useState('');\r\n    const [password, setPassword]=useState('');\r\n    const [error, setError]=useState(false);\r\n\r\n    const [_user, setUser] = useContext(Context);\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async () => {\r\n        setError(false);\r\n        try {\r\n            const requestToken = await API.getRequestToken();\r\n            const sessionId = await API.authenticate(\r\n                requestToken,\r\n                username,\r\n                password\r\n            );\r\n            console.log(sessionId);\r\n            setUser({ sessionId: sessionId.session_id, username});\r\n\r\n            navigate('/');\r\n        } catch (error) {\r\n            setError(true);\r\n        }\r\n    };\r\n\r\n    const handleInput = e => {\r\n        const name = e.currentTarget.name;\r\n        const value = e.currentTarget.value;\r\n\r\n        if(name === 'username') setUsername(value);\r\n        if(name === 'password') setPassword(value);\r\n    };\r\n    \r\n    return(\r\n        <Wrapper>\r\n            {error && <div className='error'>There was an error!</div>}\r\n            <label>Username:</label>\r\n            <input\r\n                type='text'\r\n                value={username}\r\n                name='username'\r\n                onChange={handleInput}\r\n            />\r\n            <input\r\n                type='password'\r\n                value={password}\r\n                name='password'\r\n                onChange={handleInput}\r\n            />\r\n            <Button text='Login' callback={handleSubmit} />\r\n        </Wrapper>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}